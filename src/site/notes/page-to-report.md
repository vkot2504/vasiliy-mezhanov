---
{"dg-publish":true,"permalink":"/page-to-report/","tags":["gardenEntry"]}
---

# Общие положения и идея
«ComicSphere - приложение для любителей комиксов, где пользователи могут делиться своими любимыми комиксами, обсуждать их, оставлять отзывы и создавать клубы по интересам» - из описания все звучит вполне реализуемо, кроме пункта обсуждения. Обсуждения можно реализовать через модуль комментариев, где мы введем сущность Комментарий. Однако Strapi не предоставляет встроенных средств для обсуждения в реальном времени (на примере чата или форума), поэтому обсуждения будут работать как стандартные комментарии, отправляемые через API.
## Сущность "Пользователь" и трудности реализации
Strapi по умолчанию имеет систему управления пользователями через плагин "Users & Permissions". Однако, для некоторых полей потребуется кастомизация.

Также необходимо создать поле с паролем, иначе как проходить регистрацию и дальнейшую публикацию материалов?

Также есть роли «Администратор, гость, пользователь», а поле с ролью нет.

Также добавил бы email для более простого и удобного входа пользователя

Остальное в сущности «Пользователь» все реализуемо.
## Сущность "Рейтинг" и трудности реализации
Проблема, с которой я столкнулся при реализации сущности рейтинг – расчет среднего рейтинга, который требует дополнительной логики, так как Strapi не выполняет сложные вычисления из. Коробки. Придется настроить свою логику для расчета среднего значения на основе оценок пользователей или же убрать графу. Я выберу второй вариант.
## Сущность "Группа" и трудности реализации
Трудностей с реализацией этой сущности не возникло
## Сущность "Сообщение" и трудности реализации
Как я и писал выше сообщения между пользователями не поддерживаются, равно как и не поддерживается общение в реальном времени. Поэтому придется слегка изменить реализацию этой функции – а точнее изменить на комментарии и реализовывать полноценный функционал комментариев.
## Сущность "Подписка" и трудности реализации
Проблема в том, что Strapi не поддерживает массивы в стандартной версии, а в изначальной версии проекта было именно так. К тому же, чтобы пользователи могли подписываться и отписываться от контента необходима логика управления, в связи с этим подписку я исключу.

# Источники данных и их реализация 
Strapi по умолчанию поддерживает базу данных для хранения информации о пользователях, используя SQL (например, PostgreSQL, MySQL). Также можно кастомизировать профиль пользователя и хранить больше информации, чем стандартная система аутентификации.

Strapi идеально подходит для создания и управления базой данных комиксов. Можно создать контентный тип "Комикс", который будет содержать поля для хранения всех нужных данных.

Strapi предоставляет встроенный **плагин Upload**, который позволяет загружать и хранить медиафайлы, включая изображения. Медиа можно сохранять в локальном хранилище или интегрировать с облачными сервисами (например, Amazon S3, Cloudinary).

Проблема заключается с интеграцией с социальными сетями, приведенными в изначальном проекте, а именно внешние API (например, API Facebook*, Twitter* и Instagram*). Реализация возможна с иными соц сетями – Одноклассники, вКонтакте

*Meta Platforms Inc. признана экстремистской организацией на территории РФ

# Кастомная валидация
Реализуема в полном объеме согласно изначальному проекту. Корректировки не требуются
# Реализация
1. С помощью yarn (который я установил через BREW) и команды `yarn create strapi-app my-strapi-project --quickstart` начинаем скрипт установки Strapi
2. Регистрируемся с помощью GitHub
3. Переходим в аудиторию с папкой моего проекта
4. Вводим команду  `yarn develop`
![Pasted image 20240917113755.png](/img/user/Pasted%20image%2020240917113755.png)
5. Через Localhost через порт 1327 попадаем в StrapiDashboard ![Pasted image 20240917113824.png](/img/user/Pasted%20image%2020240917113824.png)
6. Переходим в Content-Type Builder. Создаем сущность User1 и создаем поля. Все скриншоты ниже прокомментированы 
![Pasted image 20240917113850.png](/img/user/Pasted%20image%2020240917113850.png)
Создаем сущности, с которыми связан User1, чтобы в поле можно было показать их взаимосвязь.
![Pasted image 20240917113920.png](/img/user/Pasted%20image%2020240917113920.png)
Создали поля, показали взаимосвязь
![Pasted image 20240917114046.png](/img/user/Pasted%20image%2020240917114046.png)
Для поля username указываем обязательно уникальность и обязательное заполнение
![Pasted image 20240917114454.png](/img/user/Pasted%20image%2020240917114454.png)
Аналогично для поля e-mail

# REST 
Для сущности **Пользователь** можно создать следующие REST методы, обеспечивающие CRUD (Create, Read, Update, Delete) операции и дополнительные действия, связанные с активностью пользователя. Рассмотрим по порядку те, которые будут использоваться в моем проекте.

## POST /users/{user_id}

Создает нового пользователя.
Описание: Используется для регистрации нового пользователя в системе.

## DELETE /users/{user_id}

Удаление пользователя.
Описание: Удаляет пользователя с указанным user_id из системы.

## PUT /users/{user_id}

Обновление информации о пользователе.
Описание: Позволяет обновить данные пользователя, например, его никнейм или подписки

## GET /users/{user_id}

Получение информации о конкретном пользователе.
Описание: Возвращает информацию о пользователе с указанным user_id.