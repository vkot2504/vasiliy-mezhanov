---
{"dg-publish":true,"permalink":"/pattern/","tags":["gardenEntry"]}
---

from datetime import datetime

import re

from typing import List, Dict

class SortingStrategy:

    def sort(self, items: List[Dict[str, str]], rate: float = None) -> List[Dict[str, str]]:

        pass

class NameSortingStrategy(SortingStrategy):

    def sort(self, items: List[Dict[str, str]], rate: float = None) -> List[Dict[str, str]]:

        return sorted(items, key=lambda x: x['name'].lower())

class PriceSortingStrategy(SortingStrategy):

    def sort(self, items: List[Dict[str, str]], rate: float) -> List[Dict[str, str]]:

        def price_to_rub(value: str) -> float:

            if value.startswith('$'):

                return int(value[1:]) * rate 

            return int(value[3:])

        return sorted(items, key=lambda x: price_to_rub(x['price']))

class DateSortingStrategy(SortingStrategy):

    def sort(self, items: List[Dict[str, str]], rate: float = None) -> List[Dict[str, str]]:

        return sorted(items, key=lambda x: datetime.strptime(x['date'], '%d.%m.%Y'))

class Sorter:

    def __init__(self, strategy: SortingStrategy):

        self.strategy = strategy

    def sort(self, items: List[Dict[str, str]], rate: float = None) -> List[Dict[str, str]]:

        return self.strategy.sort(items, rate)

rate = 100 

Ну, и использование

sorter = Sorter(NameSortingStrategy())

print("Sorted by Name:", sorter.sort(items))

ИЛИ

sorter = Sorter(PriceSortingStrategy())

print("Sorted by Price:", sorter.sort(items, rate))

ИЛИ

sorter = Sorter(DateSortingStrategy())

print("Sorted by Date:", sorter.sort(items))




**ПРАКТИКА**
**1.**  **ИДЕЯ**

Основная идея заключается в создании онлайн-платформы для школы, которая будет служить для оповещения студентов об актуальных новостях. Также присутствует возможностью изучать школьные материалы, которые будут публиковаться учителем. Школьные новости — это отличный способ оперативно информировать всех участников образовательного процесса о событиях: школьные концерты, соревнования, олимпиады, праздники, сроки сдачи экзаменов, важные даты для контрольных, итоговых работ, расписание каникул, изменения в расписании уроков, новые правила.

**2.**   **СУЩНОСТИ**

Сущность «**Ученики**»

Поля: ФИО, пол, email, дата рождения, фото

Связь: принадлежит одному классу (связь "многие к одному" с сущностью **Классы**).

Сущность «**Учителя**»

Поля: ФИО, предмет, пол, email, дата рождения, фото

Связь: один учитель может быть связан с несколькими классами (связь "один ко многим" с сущностью **Классы**), и может публиковать учебные материалы (связь "один ко многим" с **Учебные материалы**).

Сущность «**Классы**»

Поля: номер класса, этаж, принадлежность к предмету

Связь: один класс может иметь много учеников (связь "один ко многим" с **Ученики**) и одного учителя (связь "многие к одному" с **Учителя**).

Сущность «**Учебные материалы**»

Поля: заголовок, содержание, предмет, медиа, формат документа

Связь: каждый материал должен публиковаться учителями (связь "многие к одному" с **Учителя**).

Сущность «**Новости**»

Поля: заголовок, содержание, дата публикации, медиа

Связь: публикация новостей может осуществляться как учениками, так и учителями. Соответственно, создаем связи с **Ученики** и **Учителя** (связь "многие ко многим").

Вложенные сущности

Вложенность можно сделать на уровне **Учебных материалов**, когда у каждого материала будет вложенная связь с автором (учителем)

![](file:////Users/apple/Library/Group%20Containers/UBF8T346G9.Office/TemporaryItems/msohtmlclip/clip_image001.png)Класс может содержать вложенную сущность список учеников и учитель.

**3.**   **ИСТОЧНИКИ ДАННЫХ**

Новости и учебные материалы можно будет публиковать с изображениями, документами, а также аудио/видеозаписями, которые будут подключаться через медиа-файлы. Также будут подгружаться фотографии студентов и учителей.

**4.**   **АУТЕНТИФИКАЦИЯ И ПОРЯДОК ДОСТУПА К ДАННЫМ**

Для аутентификации пользователей нужно использовать встроенный плагин пользователей и прав, пользователи смогут входить в систему по email и паролю

Уровни доступа и роли:

Администратор – полный доступ ко всем сущностям.

Учитель – может управлять своими классами, учениками, а также имеет доступ к новостям и учебным материалам.

Ученик – имеет ограниченный доступ к своим данным, материалам, а также ограниченный доступ к новостям.

Чтение доступно каждому, в том числе анониму, редактирование возможно только после аутентификации.

**5.**   **КАСТОМНАЯ ВАЛИДАЦИЯ**

Так как гипотетическая школа будет построена из 4-х этажей, то номер кабинета может принимать значения от 1 до 4 включительно.

Ученик не может быть моложе 5 лет (то есть год рождения от 2019)

Учителю обязательно больше 18 лет (то есть год рождения до 2006)

Пол может быть только мужской или женский

Email имеет стандартную валидацию ( ….@...ru или …@...com)