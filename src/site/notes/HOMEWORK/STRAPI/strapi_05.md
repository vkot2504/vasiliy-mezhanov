---
{"dg-publish":true,"permalink":"/homework/strapi/strapi-05/"}
---

# Тестирование API
Материал взят из предыдущего тестирования API, созданного на платформе STRAPI. 
### Сценарий 1
#### Описание сценария
Первый сценарий подразумевает регистрацию нового пользователя, который решил опубликовать свой авторский комикс с обложкой.
##### Авторизация
Начнем с авторизации. Для того, чтобы авторизоваться через POSTMAN достаточным будет ввести в BODY x-www-form-urlencoded username и password администратора, в моем случае это admin@admin.com, пароль admin&. В headers также указываем content-type: application/x-www-form-urlencoded. По POST запросу в http://127.0.0.1:8000/users/login/ получаем пароль в виде bearer token. Вводим его и авторизовываемся. 
![Снимок экрана 2024-11-12 в 14.56.14.png](/img/user/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-11-12%20%D0%B2%2014.56.14.png)
Допустил нарочную ошибку при вводе данных для админа
![Снимок экрана 2024-11-12 в 14.56.23.png](/img/user/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-11-12%20%D0%B2%2014.56.23.png)
![Снимок экрана 2024-11-12 в 14.56.35.png](/img/user/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-11-12%20%D0%B2%2014.56.35.png)

После авторизации можем вывести список всех пользователей, зарегистрированных в системе. До этого у нас не было прав. 
![Снимок экрана 2024-11-12 в 15.02.43.png](/img/user/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-11-12%20%D0%B2%2015.02.43.png)

##### Поэтапное выполнение сценария
![Снимок экрана 2024-11-14 в 22.54.11.png](/img/user/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-11-14%20%D0%B2%2022.54.11.png)
![Снимок экрана 2024-11-14 в 22.54.25.png](/img/user/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-11-14%20%D0%B2%2022.54.25.png)
Валидация сработала 
![Снимок экрана 2024-11-14 в 22.54.54.png](/img/user/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-11-14%20%D0%B2%2022.54.54.png)

Также можем авторизоваться непосредственно на localhost
![Снимок экрана 2024-11-14 в 22.55.34.png](/img/user/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-11-14%20%D0%B2%2022.55.34.png)
![Снимок экрана 2024-11-14 в 22.56.00.png](/img/user/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-11-14%20%D0%B2%2022.56.00.png)
Смотрим ID пользователя, а также в каком виде хранится пароль
![Снимок экрана 2024-11-14 в 22.57.26.png](/img/user/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-11-14%20%D0%B2%2022.57.26.png)
Опубликовываем комикс от лица пользователя, которого только что создали
![Снимок экрана 2024-11-14 в 22.57.37.png](/img/user/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-11-14%20%D0%B2%2022.57.37.png)
![Снимок экрана 2024-11-14 в 23.00.30.png](/img/user/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-11-14%20%D0%B2%2023.00.30.png)
Комикс опубликован, сейчас требуется только добавить обложку. 
![Снимок экрана 2024-11-14 в 23.01.37.png](/img/user/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-11-14%20%D0%B2%2023.01.37.png)
Добавили
![Снимок экрана 2024-11-14 в 23.01.52.png](/img/user/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-11-14%20%D0%B2%2023.01.52.png)
Проверили - удалось ли опубликовать 

### Вывод 
Во время выполнения сценария не возникло замечаний. Все функции, реализованные в Strapi равносильно реализованы в FastApi. Справедливо добавить в качестве положительного момента, что в FastApi в отличие от Strapi реализована авторизация. 

### Сценарий 2
#### Описание сценария
Регистрация нового пользователя, который решил прочитать имеющийся комикс (из первого сценария), оставить комментарий. Во время регистрации второго пользователя должна быть вызвана ошибка в связи с использующимся именем пользователя (валидация). С комментарием также должна быть валидация по длине 
##### Поэтапное выполнение сценария
![Снимок экрана 2024-11-14 в 23.07.08.png](/img/user/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-11-14%20%D0%B2%2023.07.08.png)
Во время регистрации пользователя с тем же username валидация сработала 
![Снимок экрана 2024-11-14 в 23.07.23.png](/img/user/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-11-14%20%D0%B2%2023.07.23.png)
Регистрация комментатора 
![Снимок экрана 2024-11-14 в 23.15.32.png](/img/user/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-11-14%20%D0%B2%2023.15.32.png)
Оставление комментария, сработала валидация по количеству символов
![Снимок экрана 2024-11-14 в 23.15.47.png](/img/user/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-11-14%20%D0%B2%2023.15.47.png)![Снимок экрана 2024-11-14 в 23.16.17.png](/img/user/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-11-14%20%D0%B2%2023.16.17.png)
Комментарий к комиксу опубликован